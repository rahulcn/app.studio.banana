{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":43,"index":122}}],"key":"phU7YuntQKgoAYKWKHVlsIL7LCY=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _libSupabase = require(_dependencyMap[2], \"../lib/supabase\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [session, setSession] = (0, _react.useState)(null);\n    const [user, setUser] = (0, _react.useState)(null);\n    const [userProfile, setUserProfile] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const refreshProfile = async () => {\n      if (!session?.access_token) return;\n      try {\n        const response = await fetch(`${_expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL}/api/user/profile`, {\n          headers: {\n            'Authorization': `Bearer ${session.access_token}`\n          }\n        });\n        if (response.ok) {\n          const data = await response.json();\n          setUserProfile(data.profile);\n        }\n      } catch (error) {\n        console.error('Error fetching user profile:', error);\n      }\n    };\n    (0, _react.useEffect)(() => {\n      // Get initial session\n      _libSupabase.supabase.auth.getSession().then(({\n        data: {\n          session\n        }\n      }) => {\n        setSession(session);\n        setUser(session?.user ?? null);\n        setLoading(false);\n        if (session) {\n          refreshProfile();\n        }\n      });\n\n      // Listen for auth changes\n      const {\n        data: {\n          subscription\n        }\n      } = _libSupabase.supabase.auth.onAuthStateChange(async (event, session) => {\n        setSession(session);\n        setUser(session?.user ?? null);\n        setLoading(false);\n        if (session && event === 'SIGNED_IN') {\n          await refreshProfile();\n        } else if (event === 'SIGNED_OUT') {\n          setUserProfile(null);\n        }\n      });\n      return () => subscription.unsubscribe();\n    }, []);\n    (0, _react.useEffect)(() => {\n      if (session) {\n        refreshProfile();\n      }\n    }, [session]);\n    const signUp = async (email, password) => {\n      const {\n        data,\n        error\n      } = await _libSupabase.supabase.auth.signUp({\n        email,\n        password\n      });\n      return {\n        data,\n        error\n      };\n    };\n    const signIn = async (email, password) => {\n      const {\n        data,\n        error\n      } = await _libSupabase.supabase.auth.signInWithPassword({\n        email,\n        password\n      });\n      return {\n        data,\n        error\n      };\n    };\n    const signOut = async () => {\n      const {\n        error\n      } = await _libSupabase.supabase.auth.signOut();\n      setUserProfile(null);\n      return {\n        error\n      };\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        session,\n        user,\n        userProfile,\n        loading,\n        signUp,\n        signIn,\n        signOut,\n        refreshProfile\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"IDeW5cg0s8X/WmgfmTsVnTHPbw4=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":154,"map":[[10,2,19,0,"Object"],[10,8,19,0],[10,9,19,0,"defineProperty"],[10,23,19,0],[10,24,19,0,"exports"],[10,31,19,0],[11,4,19,0,"enumerable"],[11,14,19,0],[12,4,19,0,"get"],[12,7,19,0],[12,18,19,0,"get"],[12,19,19,0],[13,6,19,0],[13,13,19,0,"AuthProvider"],[13,25,19,0],[14,4,19,0],[15,2,19,0],[16,2,118,0,"Object"],[16,8,118,0],[16,9,118,0,"defineProperty"],[16,23,118,0],[16,24,118,0,"exports"],[16,31,118,0],[17,4,118,0,"enumerable"],[17,14,118,0],[18,4,118,0,"get"],[18,7,118,0],[18,18,118,0,"get"],[18,19,118,0],[19,6,118,0],[19,13,118,0,"useAuth"],[19,20,118,0],[20,4,118,0],[21,2,118,0],[22,2,124,2],[22,6,124,2,"_expoVirtualEnv"],[22,21,124,2],[22,24,124,2,"require"],[22,31,124,2],[22,32,124,2,"_dependencyMap"],[22,46,124,2],[23,2,1,0],[23,6,1,0,"_react"],[23,12,1,0],[23,15,1,0,"require"],[23,22,1,0],[23,23,1,0,"_dependencyMap"],[23,37,1,0],[24,2,2,0],[24,6,2,0,"_libSupabase"],[24,18,2,0],[24,21,2,0,"require"],[24,28,2,0],[24,29,2,0,"_dependencyMap"],[24,43,2,0],[25,2,2,43],[25,6,2,43,"_reactJsxDevRuntime"],[25,25,2,43],[25,28,2,43,"require"],[25,35,2,43],[25,36,2,43,"_dependencyMap"],[25,50,2,43],[26,2,17,0],[26,8,17,6,"AuthContext"],[26,19,17,17],[26,35,17,20],[26,39,17,20,"createContext"],[26,45,17,33],[26,46,17,33,"createContext"],[26,59,17,33],[26,61,17,63,"undefined"],[26,70,17,72],[26,71,17,73],[27,2,19,7],[27,8,19,13,"AuthProvider"],[27,20,19,66],[27,23,19,69,"AuthProvider"],[27,24,19,70],[28,4,19,72,"children"],[29,2,19,81],[29,3,19,82],[29,8,19,87],[30,4,19,87,"_s"],[30,6,19,87],[31,4,20,2],[31,10,20,8],[31,11,20,9,"session"],[31,18,20,16],[31,20,20,18,"setSession"],[31,30,20,28],[31,31,20,29],[31,34,20,32],[31,38,20,32,"useState"],[31,44,20,40],[31,45,20,40,"useState"],[31,53,20,40],[31,55,20,57],[31,59,20,61],[31,60,20,62],[32,4,21,2],[32,10,21,8],[32,11,21,9,"user"],[32,15,21,13],[32,17,21,15,"setUser"],[32,24,21,22],[32,25,21,23],[32,28,21,26],[32,32,21,26,"useState"],[32,38,21,34],[32,39,21,34,"useState"],[32,47,21,34],[32,49,21,48],[32,53,21,52],[32,54,21,53],[33,4,22,2],[33,10,22,8],[33,11,22,9,"userProfile"],[33,22,22,20],[33,24,22,22,"setUserProfile"],[33,38,22,36],[33,39,22,37],[33,42,22,40],[33,46,22,40,"useState"],[33,52,22,48],[33,53,22,48,"useState"],[33,61,22,48],[33,63,22,69],[33,67,22,73],[33,68,22,74],[34,4,23,2],[34,10,23,8],[34,11,23,9,"loading"],[34,18,23,16],[34,20,23,18,"setLoading"],[34,30,23,28],[34,31,23,29],[34,34,23,32],[34,38,23,32,"useState"],[34,44,23,40],[34,45,23,40,"useState"],[34,53,23,40],[34,55,23,41],[34,59,23,45],[34,60,23,46],[35,4,25,2],[35,10,25,8,"refreshProfile"],[35,24,25,22],[35,27,25,25],[35,33,25,25,"refreshProfile"],[35,34,25,25],[35,39,25,37],[36,6,26,4],[36,10,26,8],[36,11,26,9,"session"],[36,18,26,16],[36,20,26,18,"access_token"],[36,32,26,30],[36,34,26,32],[37,6,28,4],[37,10,28,8],[38,8,29,6],[38,14,29,12,"response"],[38,22,29,20],[38,25,29,23],[38,31,29,29,"fetch"],[38,36,29,34],[38,37,29,35],[38,40,29,35,"_expoVirtualEnv"],[38,55,29,35],[38,56,29,35,"env"],[38,59,29,35],[38,60,29,35,"EXPO_PUBLIC_BACKEND_URL"],[38,83,29,35],[38,102,29,92],[38,104,29,94],[39,10,30,8,"headers"],[39,17,30,15],[39,19,30,17],[40,12,31,10],[40,27,31,25],[40,29,31,27],[40,39,31,37,"session"],[40,46,31,44],[40,47,31,45,"access_token"],[40,59,31,57],[41,10,32,8],[42,8,33,6],[42,9,33,7],[42,10,33,8],[43,8,35,6],[43,12,35,10,"response"],[43,20,35,18],[43,21,35,19,"ok"],[43,23,35,21],[43,25,35,23],[44,10,36,8],[44,16,36,14,"data"],[44,20,36,18],[44,23,36,21],[44,29,36,27,"response"],[44,37,36,35],[44,38,36,36,"json"],[44,42,36,40],[44,43,36,41],[44,44,36,42],[45,10,37,8,"setUserProfile"],[45,24,37,22],[45,25,37,23,"data"],[45,29,37,27],[45,30,37,28,"profile"],[45,37,37,35],[45,38,37,36],[46,8,38,6],[47,6,39,4],[47,7,39,5],[47,8,39,6],[47,15,39,13,"error"],[47,20,39,18],[47,22,39,20],[48,8,40,6,"console"],[48,15,40,13],[48,16,40,14,"error"],[48,21,40,19],[48,22,40,20],[48,52,40,50],[48,54,40,52,"error"],[48,59,40,57],[48,60,40,58],[49,6,41,4],[50,4,42,2],[50,5,42,3],[51,4,44,2],[51,8,44,2,"useEffect"],[51,14,44,11],[51,15,44,11,"useEffect"],[51,24,44,11],[51,26,44,12],[51,32,44,18],[52,6,45,4],[53,6,46,4,"supabase"],[53,18,46,12],[53,19,46,12,"supabase"],[53,27,46,12],[53,28,46,13,"auth"],[53,32,46,17],[53,33,46,18,"getSession"],[53,43,46,28],[53,44,46,29],[53,45,46,30],[53,46,46,31,"then"],[53,50,46,35],[53,51,46,36],[53,52,46,37],[54,8,46,39,"data"],[54,12,46,43],[54,14,46,45],[55,10,46,47,"session"],[56,8,46,55],[57,6,46,57],[57,7,46,58],[57,12,46,63],[58,8,47,6,"setSession"],[58,18,47,16],[58,19,47,17,"session"],[58,26,47,24],[58,27,47,25],[59,8,48,6,"setUser"],[59,15,48,13],[59,16,48,14,"session"],[59,23,48,21],[59,25,48,23,"user"],[59,29,48,27],[59,33,48,31],[59,37,48,35],[59,38,48,36],[60,8,49,6,"setLoading"],[60,18,49,16],[60,19,49,17],[60,24,49,22],[60,25,49,23],[61,8,51,6],[61,12,51,10,"session"],[61,19,51,17],[61,21,51,19],[62,10,52,8,"refreshProfile"],[62,24,52,22],[62,25,52,23],[62,26,52,24],[63,8,53,6],[64,6,54,4],[64,7,54,5],[64,8,54,6],[66,6,56,4],[67,6,57,4],[67,12,57,10],[68,8,57,12,"data"],[68,12,57,16],[68,14,57,18],[69,10,57,20,"subscription"],[70,8,57,33],[71,6,57,35],[71,7,57,36],[71,10,57,39,"supabase"],[71,22,57,47],[71,23,57,47,"supabase"],[71,31,57,47],[71,32,57,48,"auth"],[71,36,57,52],[71,37,57,53,"onAuthStateChange"],[71,54,57,70],[71,55,58,6],[71,62,58,13,"event"],[71,67,58,18],[71,69,58,20,"session"],[71,76,58,27],[71,81,58,32],[72,8,59,8,"setSession"],[72,18,59,18],[72,19,59,19,"session"],[72,26,59,26],[72,27,59,27],[73,8,60,8,"setUser"],[73,15,60,15],[73,16,60,16,"session"],[73,23,60,23],[73,25,60,25,"user"],[73,29,60,29],[73,33,60,33],[73,37,60,37],[73,38,60,38],[74,8,61,8,"setLoading"],[74,18,61,18],[74,19,61,19],[74,24,61,24],[74,25,61,25],[75,8,63,8],[75,12,63,12,"session"],[75,19,63,19],[75,23,63,23,"event"],[75,28,63,28],[75,33,63,33],[75,44,63,44],[75,46,63,46],[76,10,64,10],[76,16,64,16,"refreshProfile"],[76,30,64,30],[76,31,64,31],[76,32,64,32],[77,8,65,8],[77,9,65,9],[77,15,65,15],[77,19,65,19,"event"],[77,24,65,24],[77,29,65,29],[77,41,65,41],[77,43,65,43],[78,10,66,10,"setUserProfile"],[78,24,66,24],[78,25,66,25],[78,29,66,29],[78,30,66,30],[79,8,67,8],[80,6,68,6],[80,7,69,4],[80,8,69,5],[81,6,71,4],[81,13,71,11],[81,19,71,17,"subscription"],[81,31,71,29],[81,32,71,30,"unsubscribe"],[81,43,71,41],[81,44,71,42],[81,45,71,43],[82,4,72,2],[82,5,72,3],[82,7,72,5],[82,9,72,7],[82,10,72,8],[83,4,74,2],[83,8,74,2,"useEffect"],[83,14,74,11],[83,15,74,11,"useEffect"],[83,24,74,11],[83,26,74,12],[83,32,74,18],[84,6,75,4],[84,10,75,8,"session"],[84,17,75,15],[84,19,75,17],[85,8,76,6,"refreshProfile"],[85,22,76,20],[85,23,76,21],[85,24,76,22],[86,6,77,4],[87,4,78,2],[87,5,78,3],[87,7,78,5],[87,8,78,6,"session"],[87,15,78,13],[87,16,78,14],[87,17,78,15],[88,4,80,2],[88,10,80,8,"signUp"],[88,16,80,14],[88,19,80,17],[88,25,80,17,"signUp"],[88,26,80,24,"email"],[88,31,80,37],[88,33,80,39,"password"],[88,41,80,55],[88,46,80,60],[89,6,81,4],[89,12,81,10],[90,8,81,12,"data"],[90,12,81,16],[91,8,81,18,"error"],[92,6,81,24],[92,7,81,25],[92,10,81,28],[92,16,81,34,"supabase"],[92,28,81,42],[92,29,81,42,"supabase"],[92,37,81,42],[92,38,81,43,"auth"],[92,42,81,47],[92,43,81,48,"signUp"],[92,49,81,54],[92,50,81,55],[93,8,82,6,"email"],[93,13,82,11],[94,8,83,6,"password"],[95,6,84,4],[95,7,84,5],[95,8,84,6],[96,6,85,4],[96,13,85,11],[97,8,85,13,"data"],[97,12,85,17],[98,8,85,19,"error"],[99,6,85,25],[99,7,85,26],[100,4,86,2],[100,5,86,3],[101,4,88,2],[101,10,88,8,"signIn"],[101,16,88,14],[101,19,88,17],[101,25,88,17,"signIn"],[101,26,88,24,"email"],[101,31,88,37],[101,33,88,39,"password"],[101,41,88,55],[101,46,88,60],[102,6,89,4],[102,12,89,10],[103,8,89,12,"data"],[103,12,89,16],[104,8,89,18,"error"],[105,6,89,24],[105,7,89,25],[105,10,89,28],[105,16,89,34,"supabase"],[105,28,89,42],[105,29,89,42,"supabase"],[105,37,89,42],[105,38,89,43,"auth"],[105,42,89,47],[105,43,89,48,"signInWithPassword"],[105,61,89,66],[105,62,89,67],[106,8,90,6,"email"],[106,13,90,11],[107,8,91,6,"password"],[108,6,92,4],[108,7,92,5],[108,8,92,6],[109,6,93,4],[109,13,93,11],[110,8,93,13,"data"],[110,12,93,17],[111,8,93,19,"error"],[112,6,93,25],[112,7,93,26],[113,4,94,2],[113,5,94,3],[114,4,96,2],[114,10,96,8,"signOut"],[114,17,96,15],[114,20,96,18],[114,26,96,18,"signOut"],[114,27,96,18],[114,32,96,30],[115,6,97,4],[115,12,97,10],[116,8,97,12,"error"],[117,6,97,18],[117,7,97,19],[117,10,97,22],[117,16,97,28,"supabase"],[117,28,97,36],[117,29,97,36,"supabase"],[117,37,97,36],[117,38,97,37,"auth"],[117,42,97,41],[117,43,97,42,"signOut"],[117,50,97,49],[117,51,97,50],[117,52,97,51],[118,6,98,4,"setUserProfile"],[118,20,98,18],[118,21,98,19],[118,25,98,23],[118,26,98,24],[119,6,99,4],[119,13,99,11],[120,8,99,13,"error"],[121,6,99,19],[121,7,99,20],[122,4,100,2],[122,5,100,3],[123,4,102,2],[123,24,103,4],[123,28,103,4,"_reactJsxDevRuntime"],[123,47,103,4],[123,48,103,4,"jsxDEV"],[123,54,103,4],[123,56,103,5,"AuthContext"],[123,67,103,16],[123,68,103,17,"Provider"],[123,76,103,25],[124,6,103,26,"value"],[124,11,103,31],[124,13,103,33],[125,8,104,6,"session"],[125,15,104,13],[126,8,105,6,"user"],[126,12,105,10],[127,8,106,6,"userProfile"],[127,19,106,17],[128,8,107,6,"loading"],[128,15,107,13],[129,8,108,6,"signUp"],[129,14,108,12],[130,8,109,6,"signIn"],[130,14,109,12],[131,8,110,6,"signOut"],[131,15,110,13],[132,8,111,6,"refreshProfile"],[133,6,112,4],[133,7,112,6],[134,6,112,6,"children"],[134,14,112,6],[134,16,113,7,"children"],[135,4,113,15],[136,6,113,15,"fileName"],[136,14,113,15],[136,16,113,15,"_jsxFileName"],[136,28,113,15],[137,6,113,15,"lineNumber"],[137,16,113,15],[138,6,113,15,"columnNumber"],[138,18,113,15],[139,4,113,15],[139,11,114,26],[139,12,114,27],[140,2,116,0],[140,3,116,1],[141,2,116,2,"_s"],[141,4,116,2],[141,5,19,13,"AuthProvider"],[141,17,19,66],[142,2,19,66,"_c"],[142,4,19,66],[142,7,19,13,"AuthProvider"],[142,19,19,66],[143,2,118,7],[143,8,118,13,"useAuth"],[143,15,118,20],[143,18,118,23,"useAuth"],[143,19,118,23],[143,24,118,29],[144,4,118,29,"_s2"],[144,7,118,29],[145,4,119,2],[145,10,119,8,"context"],[145,17,119,15],[145,20,119,18],[145,24,119,18,"useContext"],[145,30,119,28],[145,31,119,28,"useContext"],[145,41,119,28],[145,43,119,29,"AuthContext"],[145,54,119,40],[145,55,119,41],[146,4,120,2],[146,8,120,6,"context"],[146,15,120,13],[146,20,120,18,"undefined"],[146,29,120,27],[146,31,120,29],[147,6,121,4],[147,12,121,10],[147,16,121,14,"Error"],[147,21,121,19],[147,22,121,20],[147,67,121,65],[147,68,121,66],[148,4,122,2],[149,4,123,2],[149,11,123,9,"context"],[149,18,123,16],[150,2,124,0],[150,3,124,1],[151,2,124,2,"_s2"],[151,5,124,2],[151,6,118,13,"useAuth"],[151,13,118,20],[152,2,118,20],[152,6,118,20,"_c"],[152,8,118,20],[153,2,118,20,"$RefreshReg$"],[153,14,118,20],[153,15,118,20,"_c"],[153,17,118,20],[154,0,118,20],[154,3]],"functionMap":{"names":["<global>","AuthProvider","refreshProfile","useEffect$argument_0","supabase.auth.getSession.then$argument_0","supabase.auth.onAuthStateChange$argument_0","<anonymous>","signUp","signIn","signOut","useAuth"],"mappings":"AAA;qECkB;yBCM;GDiB;YEE;oCCE;KDQ;MEI;OFU;WGG,gCH;GFC;YEE;GFI;iBME;GNM;iBOE;GPM;kBQE;GRI;CDgB;uBUE;CVM"},"hasCjsExports":false},"type":"js/module"}]}