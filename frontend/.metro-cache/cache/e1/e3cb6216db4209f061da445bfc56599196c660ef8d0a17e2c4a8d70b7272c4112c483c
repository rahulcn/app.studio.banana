{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":43,"index":122}}],"key":"phU7YuntQKgoAYKWKHVlsIL7LCY=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _libSupabase = require(_dependencyMap[1], \"../lib/supabase\");\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [session, setSession] = (0, _react.useState)(null);\n    const [user, setUser] = (0, _react.useState)(null);\n    const [userProfile, setUserProfile] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const refreshProfile = async () => {\n      if (!session?.access_token) return;\n      try {\n        const response = await fetch(`${process.env.EXPO_PUBLIC_BACKEND_URL}/api/user/profile`, {\n          headers: {\n            'Authorization': `Bearer ${session.access_token}`\n          }\n        });\n        if (response.ok) {\n          const data = await response.json();\n          setUserProfile(data.profile);\n        }\n      } catch (error) {\n        console.error('Error fetching user profile:', error);\n      }\n    };\n    (0, _react.useEffect)(() => {\n      // Get initial session\n      _libSupabase.supabase.auth.getSession().then(({\n        data: {\n          session\n        }\n      }) => {\n        setSession(session);\n        setUser(session?.user ?? null);\n        setLoading(false);\n        if (session) {\n          refreshProfile();\n        }\n      });\n\n      // Listen for auth changes\n      const {\n        data: {\n          subscription\n        }\n      } = _libSupabase.supabase.auth.onAuthStateChange(async (event, session) => {\n        setSession(session);\n        setUser(session?.user ?? null);\n        setLoading(false);\n        if (session && event === 'SIGNED_IN') {\n          await refreshProfile();\n        } else if (event === 'SIGNED_OUT') {\n          setUserProfile(null);\n        }\n      });\n      return () => subscription.unsubscribe();\n    }, []);\n    (0, _react.useEffect)(() => {\n      if (session) {\n        refreshProfile();\n      }\n    }, [session]);\n    const signUp = async (email, password) => {\n      const {\n        data,\n        error\n      } = await _libSupabase.supabase.auth.signUp({\n        email,\n        password\n      });\n      return {\n        data,\n        error\n      };\n    };\n    const signIn = async (email, password) => {\n      const {\n        data,\n        error\n      } = await _libSupabase.supabase.auth.signInWithPassword({\n        email,\n        password\n      });\n      return {\n        data,\n        error\n      };\n    };\n    const signOut = async () => {\n      const {\n        error\n      } = await _libSupabase.supabase.auth.signOut();\n      setUserProfile(null);\n      return {\n        error\n      };\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        session,\n        user,\n        userProfile,\n        loading,\n        signUp,\n        signIn,\n        signOut,\n        refreshProfile\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":144,"map":[[8,2,19,0,"Object"],[8,8,19,0],[8,9,19,0,"defineProperty"],[8,23,19,0],[8,24,19,0,"exports"],[8,31,19,0],[9,4,19,0,"enumerable"],[9,14,19,0],[10,4,19,0,"get"],[10,7,19,0],[10,18,19,0,"get"],[10,19,19,0],[11,6,19,0],[11,13,19,0,"AuthProvider"],[11,25,19,0],[12,4,19,0],[13,2,19,0],[14,2,118,0,"Object"],[14,8,118,0],[14,9,118,0,"defineProperty"],[14,23,118,0],[14,24,118,0,"exports"],[14,31,118,0],[15,4,118,0,"enumerable"],[15,14,118,0],[16,4,118,0,"get"],[16,7,118,0],[16,18,118,0,"get"],[16,19,118,0],[17,6,118,0],[17,13,118,0,"useAuth"],[17,20,118,0],[18,4,118,0],[19,2,118,0],[20,2,1,0],[20,6,1,0,"_react"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,2,0],[21,6,2,0,"_libSupabase"],[21,18,2,0],[21,21,2,0,"require"],[21,28,2,0],[21,29,2,0,"_dependencyMap"],[21,43,2,0],[22,2,2,43],[22,6,2,43,"_reactJsxDevRuntime"],[22,25,2,43],[22,28,2,43,"require"],[22,35,2,43],[22,36,2,43,"_dependencyMap"],[22,50,2,43],[23,2,17,0],[23,8,17,6,"AuthContext"],[23,19,17,17],[23,35,17,20],[23,39,17,20,"createContext"],[23,45,17,33],[23,46,17,33,"createContext"],[23,59,17,33],[23,61,17,63,"undefined"],[23,70,17,72],[23,71,17,73],[24,2,19,7],[24,8,19,13,"AuthProvider"],[24,20,19,66],[24,23,19,69,"AuthProvider"],[24,24,19,70],[25,4,19,72,"children"],[26,2,19,81],[26,3,19,82],[26,8,19,87],[27,4,20,2],[27,10,20,8],[27,11,20,9,"session"],[27,18,20,16],[27,20,20,18,"setSession"],[27,30,20,28],[27,31,20,29],[27,34,20,32],[27,38,20,32,"useState"],[27,44,20,40],[27,45,20,40,"useState"],[27,53,20,40],[27,55,20,57],[27,59,20,61],[27,60,20,62],[28,4,21,2],[28,10,21,8],[28,11,21,9,"user"],[28,15,21,13],[28,17,21,15,"setUser"],[28,24,21,22],[28,25,21,23],[28,28,21,26],[28,32,21,26,"useState"],[28,38,21,34],[28,39,21,34,"useState"],[28,47,21,34],[28,49,21,48],[28,53,21,52],[28,54,21,53],[29,4,22,2],[29,10,22,8],[29,11,22,9,"userProfile"],[29,22,22,20],[29,24,22,22,"setUserProfile"],[29,38,22,36],[29,39,22,37],[29,42,22,40],[29,46,22,40,"useState"],[29,52,22,48],[29,53,22,48,"useState"],[29,61,22,48],[29,63,22,69],[29,67,22,73],[29,68,22,74],[30,4,23,2],[30,10,23,8],[30,11,23,9,"loading"],[30,18,23,16],[30,20,23,18,"setLoading"],[30,30,23,28],[30,31,23,29],[30,34,23,32],[30,38,23,32,"useState"],[30,44,23,40],[30,45,23,40,"useState"],[30,53,23,40],[30,55,23,41],[30,59,23,45],[30,60,23,46],[31,4,25,2],[31,10,25,8,"refreshProfile"],[31,24,25,22],[31,27,25,25],[31,33,25,25,"refreshProfile"],[31,34,25,25],[31,39,25,37],[32,6,26,4],[32,10,26,8],[32,11,26,9,"session"],[32,18,26,16],[32,20,26,18,"access_token"],[32,32,26,30],[32,34,26,32],[33,6,28,4],[33,10,28,8],[34,8,29,6],[34,14,29,12,"response"],[34,22,29,20],[34,25,29,23],[34,31,29,29,"fetch"],[34,36,29,34],[34,37,29,35],[34,40,29,38,"process"],[34,47,29,45],[34,48,29,46,"env"],[34,51,29,49],[34,52,29,50,"EXPO_PUBLIC_BACKEND_URL"],[34,75,29,73],[34,94,29,92],[34,96,29,94],[35,10,30,8,"headers"],[35,17,30,15],[35,19,30,17],[36,12,31,10],[36,27,31,25],[36,29,31,27],[36,39,31,37,"session"],[36,46,31,44],[36,47,31,45,"access_token"],[36,59,31,57],[37,10,32,8],[38,8,33,6],[38,9,33,7],[38,10,33,8],[39,8,35,6],[39,12,35,10,"response"],[39,20,35,18],[39,21,35,19,"ok"],[39,23,35,21],[39,25,35,23],[40,10,36,8],[40,16,36,14,"data"],[40,20,36,18],[40,23,36,21],[40,29,36,27,"response"],[40,37,36,35],[40,38,36,36,"json"],[40,42,36,40],[40,43,36,41],[40,44,36,42],[41,10,37,8,"setUserProfile"],[41,24,37,22],[41,25,37,23,"data"],[41,29,37,27],[41,30,37,28,"profile"],[41,37,37,35],[41,38,37,36],[42,8,38,6],[43,6,39,4],[43,7,39,5],[43,8,39,6],[43,15,39,13,"error"],[43,20,39,18],[43,22,39,20],[44,8,40,6,"console"],[44,15,40,13],[44,16,40,14,"error"],[44,21,40,19],[44,22,40,20],[44,52,40,50],[44,54,40,52,"error"],[44,59,40,57],[44,60,40,58],[45,6,41,4],[46,4,42,2],[46,5,42,3],[47,4,44,2],[47,8,44,2,"useEffect"],[47,14,44,11],[47,15,44,11,"useEffect"],[47,24,44,11],[47,26,44,12],[47,32,44,18],[48,6,45,4],[49,6,46,4,"supabase"],[49,18,46,12],[49,19,46,12,"supabase"],[49,27,46,12],[49,28,46,13,"auth"],[49,32,46,17],[49,33,46,18,"getSession"],[49,43,46,28],[49,44,46,29],[49,45,46,30],[49,46,46,31,"then"],[49,50,46,35],[49,51,46,36],[49,52,46,37],[50,8,46,39,"data"],[50,12,46,43],[50,14,46,45],[51,10,46,47,"session"],[52,8,46,55],[53,6,46,57],[53,7,46,58],[53,12,46,63],[54,8,47,6,"setSession"],[54,18,47,16],[54,19,47,17,"session"],[54,26,47,24],[54,27,47,25],[55,8,48,6,"setUser"],[55,15,48,13],[55,16,48,14,"session"],[55,23,48,21],[55,25,48,23,"user"],[55,29,48,27],[55,33,48,31],[55,37,48,35],[55,38,48,36],[56,8,49,6,"setLoading"],[56,18,49,16],[56,19,49,17],[56,24,49,22],[56,25,49,23],[57,8,51,6],[57,12,51,10,"session"],[57,19,51,17],[57,21,51,19],[58,10,52,8,"refreshProfile"],[58,24,52,22],[58,25,52,23],[58,26,52,24],[59,8,53,6],[60,6,54,4],[60,7,54,5],[60,8,54,6],[62,6,56,4],[63,6,57,4],[63,12,57,10],[64,8,57,12,"data"],[64,12,57,16],[64,14,57,18],[65,10,57,20,"subscription"],[66,8,57,33],[67,6,57,35],[67,7,57,36],[67,10,57,39,"supabase"],[67,22,57,47],[67,23,57,47,"supabase"],[67,31,57,47],[67,32,57,48,"auth"],[67,36,57,52],[67,37,57,53,"onAuthStateChange"],[67,54,57,70],[67,55,58,6],[67,62,58,13,"event"],[67,67,58,18],[67,69,58,20,"session"],[67,76,58,27],[67,81,58,32],[68,8,59,8,"setSession"],[68,18,59,18],[68,19,59,19,"session"],[68,26,59,26],[68,27,59,27],[69,8,60,8,"setUser"],[69,15,60,15],[69,16,60,16,"session"],[69,23,60,23],[69,25,60,25,"user"],[69,29,60,29],[69,33,60,33],[69,37,60,37],[69,38,60,38],[70,8,61,8,"setLoading"],[70,18,61,18],[70,19,61,19],[70,24,61,24],[70,25,61,25],[71,8,63,8],[71,12,63,12,"session"],[71,19,63,19],[71,23,63,23,"event"],[71,28,63,28],[71,33,63,33],[71,44,63,44],[71,46,63,46],[72,10,64,10],[72,16,64,16,"refreshProfile"],[72,30,64,30],[72,31,64,31],[72,32,64,32],[73,8,65,8],[73,9,65,9],[73,15,65,15],[73,19,65,19,"event"],[73,24,65,24],[73,29,65,29],[73,41,65,41],[73,43,65,43],[74,10,66,10,"setUserProfile"],[74,24,66,24],[74,25,66,25],[74,29,66,29],[74,30,66,30],[75,8,67,8],[76,6,68,6],[76,7,69,4],[76,8,69,5],[77,6,71,4],[77,13,71,11],[77,19,71,17,"subscription"],[77,31,71,29],[77,32,71,30,"unsubscribe"],[77,43,71,41],[77,44,71,42],[77,45,71,43],[78,4,72,2],[78,5,72,3],[78,7,72,5],[78,9,72,7],[78,10,72,8],[79,4,74,2],[79,8,74,2,"useEffect"],[79,14,74,11],[79,15,74,11,"useEffect"],[79,24,74,11],[79,26,74,12],[79,32,74,18],[80,6,75,4],[80,10,75,8,"session"],[80,17,75,15],[80,19,75,17],[81,8,76,6,"refreshProfile"],[81,22,76,20],[81,23,76,21],[81,24,76,22],[82,6,77,4],[83,4,78,2],[83,5,78,3],[83,7,78,5],[83,8,78,6,"session"],[83,15,78,13],[83,16,78,14],[83,17,78,15],[84,4,80,2],[84,10,80,8,"signUp"],[84,16,80,14],[84,19,80,17],[84,25,80,17,"signUp"],[84,26,80,24,"email"],[84,31,80,37],[84,33,80,39,"password"],[84,41,80,55],[84,46,80,60],[85,6,81,4],[85,12,81,10],[86,8,81,12,"data"],[86,12,81,16],[87,8,81,18,"error"],[88,6,81,24],[88,7,81,25],[88,10,81,28],[88,16,81,34,"supabase"],[88,28,81,42],[88,29,81,42,"supabase"],[88,37,81,42],[88,38,81,43,"auth"],[88,42,81,47],[88,43,81,48,"signUp"],[88,49,81,54],[88,50,81,55],[89,8,82,6,"email"],[89,13,82,11],[90,8,83,6,"password"],[91,6,84,4],[91,7,84,5],[91,8,84,6],[92,6,85,4],[92,13,85,11],[93,8,85,13,"data"],[93,12,85,17],[94,8,85,19,"error"],[95,6,85,25],[95,7,85,26],[96,4,86,2],[96,5,86,3],[97,4,88,2],[97,10,88,8,"signIn"],[97,16,88,14],[97,19,88,17],[97,25,88,17,"signIn"],[97,26,88,24,"email"],[97,31,88,37],[97,33,88,39,"password"],[97,41,88,55],[97,46,88,60],[98,6,89,4],[98,12,89,10],[99,8,89,12,"data"],[99,12,89,16],[100,8,89,18,"error"],[101,6,89,24],[101,7,89,25],[101,10,89,28],[101,16,89,34,"supabase"],[101,28,89,42],[101,29,89,42,"supabase"],[101,37,89,42],[101,38,89,43,"auth"],[101,42,89,47],[101,43,89,48,"signInWithPassword"],[101,61,89,66],[101,62,89,67],[102,8,90,6,"email"],[102,13,90,11],[103,8,91,6,"password"],[104,6,92,4],[104,7,92,5],[104,8,92,6],[105,6,93,4],[105,13,93,11],[106,8,93,13,"data"],[106,12,93,17],[107,8,93,19,"error"],[108,6,93,25],[108,7,93,26],[109,4,94,2],[109,5,94,3],[110,4,96,2],[110,10,96,8,"signOut"],[110,17,96,15],[110,20,96,18],[110,26,96,18,"signOut"],[110,27,96,18],[110,32,96,30],[111,6,97,4],[111,12,97,10],[112,8,97,12,"error"],[113,6,97,18],[113,7,97,19],[113,10,97,22],[113,16,97,28,"supabase"],[113,28,97,36],[113,29,97,36,"supabase"],[113,37,97,36],[113,38,97,37,"auth"],[113,42,97,41],[113,43,97,42,"signOut"],[113,50,97,49],[113,51,97,50],[113,52,97,51],[114,6,98,4,"setUserProfile"],[114,20,98,18],[114,21,98,19],[114,25,98,23],[114,26,98,24],[115,6,99,4],[115,13,99,11],[116,8,99,13,"error"],[117,6,99,19],[117,7,99,20],[118,4,100,2],[118,5,100,3],[119,4,102,2],[119,24,103,4],[119,28,103,4,"_reactJsxDevRuntime"],[119,47,103,4],[119,48,103,4,"jsxDEV"],[119,54,103,4],[119,56,103,5,"AuthContext"],[119,67,103,16],[119,68,103,17,"Provider"],[119,76,103,25],[120,6,103,26,"value"],[120,11,103,31],[120,13,103,33],[121,8,104,6,"session"],[121,15,104,13],[122,8,105,6,"user"],[122,12,105,10],[123,8,106,6,"userProfile"],[123,19,106,17],[124,8,107,6,"loading"],[124,15,107,13],[125,8,108,6,"signUp"],[125,14,108,12],[126,8,109,6,"signIn"],[126,14,109,12],[127,8,110,6,"signOut"],[127,15,110,13],[128,8,111,6,"refreshProfile"],[129,6,112,4],[129,7,112,6],[130,6,112,6,"children"],[130,14,112,6],[130,16,113,7,"children"],[131,4,113,15],[132,6,113,15,"fileName"],[132,14,113,15],[132,16,113,15,"_jsxFileName"],[132,28,113,15],[133,6,113,15,"lineNumber"],[133,16,113,15],[134,6,113,15,"columnNumber"],[134,18,113,15],[135,4,113,15],[135,11,114,26],[135,12,114,27],[136,2,116,0],[136,3,116,1],[137,2,118,7],[137,8,118,13,"useAuth"],[137,15,118,20],[137,18,118,23,"useAuth"],[137,19,118,23],[137,24,118,29],[138,4,119,2],[138,10,119,8,"context"],[138,17,119,15],[138,20,119,18],[138,24,119,18,"useContext"],[138,30,119,28],[138,31,119,28,"useContext"],[138,41,119,28],[138,43,119,29,"AuthContext"],[138,54,119,40],[138,55,119,41],[139,4,120,2],[139,8,120,6,"context"],[139,15,120,13],[139,20,120,18,"undefined"],[139,29,120,27],[139,31,120,29],[140,6,121,4],[140,12,121,10],[140,16,121,14,"Error"],[140,21,121,19],[140,22,121,20],[140,67,121,65],[140,68,121,66],[141,4,122,2],[142,4,123,2],[142,11,123,9,"context"],[142,18,123,16],[143,2,124,0],[143,3,124,1],[144,0,124,2],[144,3]],"functionMap":{"names":["<global>","AuthProvider","refreshProfile","useEffect$argument_0","supabase.auth.getSession.then$argument_0","supabase.auth.onAuthStateChange$argument_0","<anonymous>","signUp","signIn","signOut","useAuth"],"mappings":"AAA;qECkB;yBCM;GDiB;YEE;oCCE;KDQ;MEI;OFU;WGG,gCH;GFC;YEE;GFI;iBME;GNM;iBOE;GPM;kBQE;GRI;CDgB;uBUE;CVM"},"hasCjsExports":false},"type":"js/module"}]}