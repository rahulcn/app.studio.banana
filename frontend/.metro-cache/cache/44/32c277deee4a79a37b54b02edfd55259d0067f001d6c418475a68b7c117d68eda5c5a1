{"dependencies":[{"name":"../lib/errors","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":681},"end":{"line":10,"column":47,"index":728}}],"key":"tudpaQjH3OjVUtpmjZhVLT9U2eg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return StreamDownloadBuilder;\n    }\n  });\n  var _libErrors = require(_dependencyMap[0], \"../lib/errors\");\n  var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n    function adopt(value) {\n      return value instanceof P ? value : new P(function (resolve) {\n        resolve(value);\n      });\n    }\n    return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) {\n        try {\n          step(generator.next(value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function rejected(value) {\n        try {\n          step(generator[\"throw\"](value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function step(result) {\n        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n      }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n  };\n  class StreamDownloadBuilder {\n    constructor(downloadFn, shouldThrowOnError) {\n      this.downloadFn = downloadFn;\n      this.shouldThrowOnError = shouldThrowOnError;\n    }\n    then(onfulfilled, onrejected) {\n      return this.execute().then(onfulfilled, onrejected);\n    }\n    execute() {\n      return __awaiter(this, void 0, void 0, function* () {\n        try {\n          const result = yield this.downloadFn();\n          return {\n            data: result.body,\n            error: null\n          };\n        } catch (error) {\n          if (this.shouldThrowOnError) {\n            throw error;\n          }\n          if ((0, _libErrors.isStorageError)(error)) {\n            return {\n              data: null,\n              error\n            };\n          }\n          throw error;\n        }\n      });\n    }\n  }\n});","lineCount":72,"map":[[7,2,11,15,"Object"],[7,8,11,15],[7,9,11,15,"defineProperty"],[7,23,11,15],[7,24,11,15,"exports"],[7,31,11,15],[8,4,11,15,"enumerable"],[8,14,11,15],[9,4,11,15,"get"],[9,7,11,15],[9,18,11,15,"get"],[9,19,11,15],[10,6,11,15],[10,13,11,15,"StreamDownloadBuilder"],[10,34,11,15],[11,4,11,15],[12,2,11,15],[13,2,10,0],[13,6,10,0,"_libErrors"],[13,16,10,0],[13,19,10,0,"require"],[13,26,10,0],[13,27,10,0,"_dependencyMap"],[13,41,10,0],[14,2,1,0],[14,6,1,4,"__awaiter"],[14,15,1,13],[14,18,1,17],[14,22,1,21],[14,26,1,25],[14,30,1,29],[14,31,1,30,"__awaiter"],[14,40,1,39],[14,44,1,44],[14,54,1,54,"thisArg"],[14,61,1,61],[14,63,1,63,"_arguments"],[14,73,1,73],[14,75,1,75,"P"],[14,76,1,76],[14,78,1,78,"generator"],[14,87,1,87],[14,89,1,89],[15,4,2,4],[15,13,2,13,"adopt"],[15,18,2,18,"adopt"],[15,19,2,19,"value"],[15,24,2,24],[15,26,2,26],[16,6,2,28],[16,13,2,35,"value"],[16,18,2,40],[16,30,2,52,"P"],[16,31,2,53],[16,34,2,56,"value"],[16,39,2,61],[16,42,2,64],[16,46,2,68,"P"],[16,47,2,69],[16,48,2,70],[16,58,2,80,"resolve"],[16,65,2,87],[16,67,2,89],[17,8,2,91,"resolve"],[17,15,2,98],[17,16,2,99,"value"],[17,21,2,104],[17,22,2,105],[18,6,2,107],[18,7,2,108],[18,8,2,109],[19,4,2,111],[20,4,3,4],[20,11,3,11],[20,16,3,16,"P"],[20,17,3,17],[20,22,3,22,"P"],[20,23,3,23],[20,26,3,26,"Promise"],[20,33,3,33],[20,34,3,34],[20,36,3,36],[20,46,3,46,"resolve"],[20,53,3,53],[20,55,3,55,"reject"],[20,61,3,61],[20,63,3,63],[21,6,4,8],[21,15,4,17,"fulfilled"],[21,24,4,26,"fulfilled"],[21,25,4,27,"value"],[21,30,4,32],[21,32,4,34],[22,8,4,36],[22,12,4,40],[23,10,4,42,"step"],[23,14,4,46],[23,15,4,47,"generator"],[23,24,4,56],[23,25,4,57,"next"],[23,29,4,61],[23,30,4,62,"value"],[23,35,4,67],[23,36,4,68],[23,37,4,69],[24,8,4,71],[24,9,4,72],[24,10,4,73],[24,17,4,80,"e"],[24,18,4,81],[24,20,4,83],[25,10,4,85,"reject"],[25,16,4,91],[25,17,4,92,"e"],[25,18,4,93],[25,19,4,94],[26,8,4,96],[27,6,4,98],[28,6,5,8],[28,15,5,17,"rejected"],[28,23,5,25,"rejected"],[28,24,5,26,"value"],[28,29,5,31],[28,31,5,33],[29,8,5,35],[29,12,5,39],[30,10,5,41,"step"],[30,14,5,45],[30,15,5,46,"generator"],[30,24,5,55],[30,25,5,56],[30,32,5,63],[30,33,5,64],[30,34,5,65,"value"],[30,39,5,70],[30,40,5,71],[30,41,5,72],[31,8,5,74],[31,9,5,75],[31,10,5,76],[31,17,5,83,"e"],[31,18,5,84],[31,20,5,86],[32,10,5,88,"reject"],[32,16,5,94],[32,17,5,95,"e"],[32,18,5,96],[32,19,5,97],[33,8,5,99],[34,6,5,101],[35,6,6,8],[35,15,6,17,"step"],[35,19,6,21,"step"],[35,20,6,22,"result"],[35,26,6,28],[35,28,6,30],[36,8,6,32,"result"],[36,14,6,38],[36,15,6,39,"done"],[36,19,6,43],[36,22,6,46,"resolve"],[36,29,6,53],[36,30,6,54,"result"],[36,36,6,60],[36,37,6,61,"value"],[36,42,6,66],[36,43,6,67],[36,46,6,70,"adopt"],[36,51,6,75],[36,52,6,76,"result"],[36,58,6,82],[36,59,6,83,"value"],[36,64,6,88],[36,65,6,89],[36,66,6,90,"then"],[36,70,6,94],[36,71,6,95,"fulfilled"],[36,80,6,104],[36,82,6,106,"rejected"],[36,90,6,114],[36,91,6,115],[37,6,6,117],[38,6,7,8,"step"],[38,10,7,12],[38,11,7,13],[38,12,7,14,"generator"],[38,21,7,23],[38,24,7,26,"generator"],[38,33,7,35],[38,34,7,36,"apply"],[38,39,7,41],[38,40,7,42,"thisArg"],[38,47,7,49],[38,49,7,51,"_arguments"],[38,59,7,61],[38,63,7,65],[38,65,7,67],[38,66,7,68],[38,68,7,70,"next"],[38,72,7,74],[38,73,7,75],[38,74,7,76],[38,75,7,77],[39,4,8,4],[39,5,8,5],[39,6,8,6],[40,2,9,0],[40,3,9,1],[41,2,11,15],[41,8,11,21,"StreamDownloadBuilder"],[41,29,11,42],[41,30,11,43],[42,4,12,4,"constructor"],[42,15,12,15,"constructor"],[42,16,12,16,"downloadFn"],[42,26,12,26],[42,28,12,28,"shouldThrowOnError"],[42,46,12,46],[42,48,12,48],[43,6,13,8],[43,10,13,12],[43,11,13,13,"downloadFn"],[43,21,13,23],[43,24,13,26,"downloadFn"],[43,34,13,36],[44,6,14,8],[44,10,14,12],[44,11,14,13,"shouldThrowOnError"],[44,29,14,31],[44,32,14,34,"shouldThrowOnError"],[44,50,14,52],[45,4,15,4],[46,4,16,4,"then"],[46,8,16,8,"then"],[46,9,16,9,"onfulfilled"],[46,20,16,20],[46,22,16,22,"onrejected"],[46,32,16,32],[46,34,16,34],[47,6,17,8],[47,13,17,15],[47,17,17,19],[47,18,17,20,"execute"],[47,25,17,27],[47,26,17,28],[47,27,17,29],[47,28,17,30,"then"],[47,32,17,34],[47,33,17,35,"onfulfilled"],[47,44,17,46],[47,46,17,48,"onrejected"],[47,56,17,58],[47,57,17,59],[48,4,18,4],[49,4,19,4,"execute"],[49,11,19,11,"execute"],[49,12,19,11],[49,14,19,14],[50,6,20,8],[50,13,20,15,"__awaiter"],[50,22,20,24],[50,23,20,25],[50,27,20,29],[50,29,20,31],[50,34,20,36],[50,35,20,37],[50,37,20,39],[50,42,20,44],[50,43,20,45],[50,45,20,47],[50,58,20,60],[51,8,21,12],[51,12,21,16],[52,10,22,16],[52,16,22,22,"result"],[52,22,22,28],[52,25,22,31],[52,31,22,37],[52,35,22,41],[52,36,22,42,"downloadFn"],[52,46,22,52],[52,47,22,53],[52,48,22,54],[53,10,23,16],[53,17,23,23],[54,12,24,20,"data"],[54,16,24,24],[54,18,24,26,"result"],[54,24,24,32],[54,25,24,33,"body"],[54,29,24,37],[55,12,25,20,"error"],[55,17,25,25],[55,19,25,27],[56,10,26,16],[56,11,26,17],[57,8,27,12],[57,9,27,13],[57,10,28,12],[57,17,28,19,"error"],[57,22,28,24],[57,24,28,26],[58,10,29,16],[58,14,29,20],[58,18,29,24],[58,19,29,25,"shouldThrowOnError"],[58,37,29,43],[58,39,29,45],[59,12,30,20],[59,18,30,26,"error"],[59,23,30,31],[60,10,31,16],[61,10,32,16],[61,14,32,20],[61,18,32,20,"isStorageError"],[61,28,32,34],[61,29,32,34,"isStorageError"],[61,43,32,34],[61,45,32,35,"error"],[61,50,32,40],[61,51,32,41],[61,53,32,43],[62,12,33,20],[62,19,33,27],[63,14,33,29,"data"],[63,18,33,33],[63,20,33,35],[63,24,33,39],[64,14,33,41,"error"],[65,12,33,47],[65,13,33,48],[66,10,34,16],[67,10,35,16],[67,16,35,22,"error"],[67,21,35,27],[68,8,36,12],[69,6,37,8],[69,7,37,9],[69,8,37,10],[70,4,38,4],[71,2,39,0],[72,0,39,1],[72,3]],"functionMap":{"names":["<global>","<anonymous>","adopt","P$argument_0","fulfilled","rejected","step","StreamDownloadBuilder","constructor","then","execute","__awaiter$argument_3"],"mappings":"AAA,4CC;ICC,kEC,sCD,ID;QGE,2FH;QIC,8FJ;QKC,8GL;CDG;eOE;ICC;KDG;IEC;KFE;IGC;+CCC;SDiB;KHC;CPC"},"hasCjsExports":false},"type":"js/module"}]}