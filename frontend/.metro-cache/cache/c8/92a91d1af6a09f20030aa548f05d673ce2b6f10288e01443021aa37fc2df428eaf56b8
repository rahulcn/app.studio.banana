{"dependencies":[{"name":"../lib/errors","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":681},"end":{"line":10,"column":47,"index":728}}],"key":"tudpaQjH3OjVUtpmjZhVLT9U2eg=","exportNames":["*"],"imports":1}},{"name":"./StreamDownloadBuilder","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":729},"end":{"line":11,"column":60,"index":789}}],"key":"8Ubul3M21knXuSFidv57RlVYJmI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return BlobDownloadBuilder;\n    }\n  });\n  var _libErrors = require(_dependencyMap[0], \"../lib/errors\");\n  var _StreamDownloadBuilder = require(_dependencyMap[1], \"./StreamDownloadBuilder\");\n  var StreamDownloadBuilder = _interopDefault(_StreamDownloadBuilder);\n  var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n    function adopt(value) {\n      return value instanceof P ? value : new P(function (resolve) {\n        resolve(value);\n      });\n    }\n    return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) {\n        try {\n          step(generator.next(value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function rejected(value) {\n        try {\n          step(generator[\"throw\"](value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function step(result) {\n        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n      }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n  };\n  class BlobDownloadBuilder {\n    constructor(downloadFn, shouldThrowOnError) {\n      this.downloadFn = downloadFn;\n      this.shouldThrowOnError = shouldThrowOnError;\n    }\n    asStream() {\n      return new StreamDownloadBuilder.default(this.downloadFn, this.shouldThrowOnError);\n    }\n    then(onfulfilled, onrejected) {\n      return this.execute().then(onfulfilled, onrejected);\n    }\n    execute() {\n      return __awaiter(this, void 0, void 0, function* () {\n        try {\n          const result = yield this.downloadFn();\n          return {\n            data: yield result.blob(),\n            error: null\n          };\n        } catch (error) {\n          if (this.shouldThrowOnError) {\n            throw error;\n          }\n          if ((0, _libErrors.isStorageError)(error)) {\n            return {\n              data: null,\n              error\n            };\n          }\n          throw error;\n        }\n      });\n    }\n  }\n});","lineCount":82,"map":[[12,2,12,15,"Object"],[12,8,12,15],[12,9,12,15,"defineProperty"],[12,23,12,15],[12,24,12,15,"exports"],[12,31,12,15],[13,4,12,15,"enumerable"],[13,14,12,15],[14,4,12,15,"get"],[14,7,12,15],[14,18,12,15,"get"],[14,19,12,15],[15,6,12,15],[15,13,12,15,"BlobDownloadBuilder"],[15,32,12,15],[16,4,12,15],[17,2,12,15],[18,2,10,0],[18,6,10,0,"_libErrors"],[18,16,10,0],[18,19,10,0,"require"],[18,26,10,0],[18,27,10,0,"_dependencyMap"],[18,41,10,0],[19,2,11,0],[19,6,11,0,"_StreamDownloadBuilder"],[19,28,11,0],[19,31,11,0,"require"],[19,38,11,0],[19,39,11,0,"_dependencyMap"],[19,53,11,0],[20,2,11,0],[20,6,11,0,"StreamDownloadBuilder"],[20,27,11,0],[20,30,11,0,"_interopDefault"],[20,45,11,0],[20,46,11,0,"_StreamDownloadBuilder"],[20,68,11,0],[21,2,1,0],[21,6,1,4,"__awaiter"],[21,15,1,13],[21,18,1,17],[21,22,1,21],[21,26,1,25],[21,30,1,29],[21,31,1,30,"__awaiter"],[21,40,1,39],[21,44,1,44],[21,54,1,54,"thisArg"],[21,61,1,61],[21,63,1,63,"_arguments"],[21,73,1,73],[21,75,1,75,"P"],[21,76,1,76],[21,78,1,78,"generator"],[21,87,1,87],[21,89,1,89],[22,4,2,4],[22,13,2,13,"adopt"],[22,18,2,18,"adopt"],[22,19,2,19,"value"],[22,24,2,24],[22,26,2,26],[23,6,2,28],[23,13,2,35,"value"],[23,18,2,40],[23,30,2,52,"P"],[23,31,2,53],[23,34,2,56,"value"],[23,39,2,61],[23,42,2,64],[23,46,2,68,"P"],[23,47,2,69],[23,48,2,70],[23,58,2,80,"resolve"],[23,65,2,87],[23,67,2,89],[24,8,2,91,"resolve"],[24,15,2,98],[24,16,2,99,"value"],[24,21,2,104],[24,22,2,105],[25,6,2,107],[25,7,2,108],[25,8,2,109],[26,4,2,111],[27,4,3,4],[27,11,3,11],[27,16,3,16,"P"],[27,17,3,17],[27,22,3,22,"P"],[27,23,3,23],[27,26,3,26,"Promise"],[27,33,3,33],[27,34,3,34],[27,36,3,36],[27,46,3,46,"resolve"],[27,53,3,53],[27,55,3,55,"reject"],[27,61,3,61],[27,63,3,63],[28,6,4,8],[28,15,4,17,"fulfilled"],[28,24,4,26,"fulfilled"],[28,25,4,27,"value"],[28,30,4,32],[28,32,4,34],[29,8,4,36],[29,12,4,40],[30,10,4,42,"step"],[30,14,4,46],[30,15,4,47,"generator"],[30,24,4,56],[30,25,4,57,"next"],[30,29,4,61],[30,30,4,62,"value"],[30,35,4,67],[30,36,4,68],[30,37,4,69],[31,8,4,71],[31,9,4,72],[31,10,4,73],[31,17,4,80,"e"],[31,18,4,81],[31,20,4,83],[32,10,4,85,"reject"],[32,16,4,91],[32,17,4,92,"e"],[32,18,4,93],[32,19,4,94],[33,8,4,96],[34,6,4,98],[35,6,5,8],[35,15,5,17,"rejected"],[35,23,5,25,"rejected"],[35,24,5,26,"value"],[35,29,5,31],[35,31,5,33],[36,8,5,35],[36,12,5,39],[37,10,5,41,"step"],[37,14,5,45],[37,15,5,46,"generator"],[37,24,5,55],[37,25,5,56],[37,32,5,63],[37,33,5,64],[37,34,5,65,"value"],[37,39,5,70],[37,40,5,71],[37,41,5,72],[38,8,5,74],[38,9,5,75],[38,10,5,76],[38,17,5,83,"e"],[38,18,5,84],[38,20,5,86],[39,10,5,88,"reject"],[39,16,5,94],[39,17,5,95,"e"],[39,18,5,96],[39,19,5,97],[40,8,5,99],[41,6,5,101],[42,6,6,8],[42,15,6,17,"step"],[42,19,6,21,"step"],[42,20,6,22,"result"],[42,26,6,28],[42,28,6,30],[43,8,6,32,"result"],[43,14,6,38],[43,15,6,39,"done"],[43,19,6,43],[43,22,6,46,"resolve"],[43,29,6,53],[43,30,6,54,"result"],[43,36,6,60],[43,37,6,61,"value"],[43,42,6,66],[43,43,6,67],[43,46,6,70,"adopt"],[43,51,6,75],[43,52,6,76,"result"],[43,58,6,82],[43,59,6,83,"value"],[43,64,6,88],[43,65,6,89],[43,66,6,90,"then"],[43,70,6,94],[43,71,6,95,"fulfilled"],[43,80,6,104],[43,82,6,106,"rejected"],[43,90,6,114],[43,91,6,115],[44,6,6,117],[45,6,7,8,"step"],[45,10,7,12],[45,11,7,13],[45,12,7,14,"generator"],[45,21,7,23],[45,24,7,26,"generator"],[45,33,7,35],[45,34,7,36,"apply"],[45,39,7,41],[45,40,7,42,"thisArg"],[45,47,7,49],[45,49,7,51,"_arguments"],[45,59,7,61],[45,63,7,65],[45,65,7,67],[45,66,7,68],[45,68,7,70,"next"],[45,72,7,74],[45,73,7,75],[45,74,7,76],[45,75,7,77],[46,4,8,4],[46,5,8,5],[46,6,8,6],[47,2,9,0],[47,3,9,1],[48,2,12,15],[48,8,12,21,"BlobDownloadBuilder"],[48,27,12,40],[48,28,12,41],[49,4,13,4,"constructor"],[49,15,13,15,"constructor"],[49,16,13,16,"downloadFn"],[49,26,13,26],[49,28,13,28,"shouldThrowOnError"],[49,46,13,46],[49,48,13,48],[50,6,14,8],[50,10,14,12],[50,11,14,13,"downloadFn"],[50,21,14,23],[50,24,14,26,"downloadFn"],[50,34,14,36],[51,6,15,8],[51,10,15,12],[51,11,15,13,"shouldThrowOnError"],[51,29,15,31],[51,32,15,34,"shouldThrowOnError"],[51,50,15,52],[52,4,16,4],[53,4,17,4,"asStream"],[53,12,17,12,"asStream"],[53,13,17,12],[53,15,17,15],[54,6,18,8],[54,13,18,15],[54,17,18,19,"StreamDownloadBuilder"],[54,38,18,40],[54,39,18,40,"default"],[54,46,18,40],[54,47,18,41],[54,51,18,45],[54,52,18,46,"downloadFn"],[54,62,18,56],[54,64,18,58],[54,68,18,62],[54,69,18,63,"shouldThrowOnError"],[54,87,18,81],[54,88,18,82],[55,4,19,4],[56,4,20,4,"then"],[56,8,20,8,"then"],[56,9,20,9,"onfulfilled"],[56,20,20,20],[56,22,20,22,"onrejected"],[56,32,20,32],[56,34,20,34],[57,6,21,8],[57,13,21,15],[57,17,21,19],[57,18,21,20,"execute"],[57,25,21,27],[57,26,21,28],[57,27,21,29],[57,28,21,30,"then"],[57,32,21,34],[57,33,21,35,"onfulfilled"],[57,44,21,46],[57,46,21,48,"onrejected"],[57,56,21,58],[57,57,21,59],[58,4,22,4],[59,4,23,4,"execute"],[59,11,23,11,"execute"],[59,12,23,11],[59,14,23,14],[60,6,24,8],[60,13,24,15,"__awaiter"],[60,22,24,24],[60,23,24,25],[60,27,24,29],[60,29,24,31],[60,34,24,36],[60,35,24,37],[60,37,24,39],[60,42,24,44],[60,43,24,45],[60,45,24,47],[60,58,24,60],[61,8,25,12],[61,12,25,16],[62,10,26,16],[62,16,26,22,"result"],[62,22,26,28],[62,25,26,31],[62,31,26,37],[62,35,26,41],[62,36,26,42,"downloadFn"],[62,46,26,52],[62,47,26,53],[62,48,26,54],[63,10,27,16],[63,17,27,23],[64,12,28,20,"data"],[64,16,28,24],[64,18,28,26],[64,24,28,32,"result"],[64,30,28,38],[64,31,28,39,"blob"],[64,35,28,43],[64,36,28,44],[64,37,28,45],[65,12,29,20,"error"],[65,17,29,25],[65,19,29,27],[66,10,30,16],[66,11,30,17],[67,8,31,12],[67,9,31,13],[67,10,32,12],[67,17,32,19,"error"],[67,22,32,24],[67,24,32,26],[68,10,33,16],[68,14,33,20],[68,18,33,24],[68,19,33,25,"shouldThrowOnError"],[68,37,33,43],[68,39,33,45],[69,12,34,20],[69,18,34,26,"error"],[69,23,34,31],[70,10,35,16],[71,10,36,16],[71,14,36,20],[71,18,36,20,"isStorageError"],[71,28,36,34],[71,29,36,34,"isStorageError"],[71,43,36,34],[71,45,36,35,"error"],[71,50,36,40],[71,51,36,41],[71,53,36,43],[72,12,37,20],[72,19,37,27],[73,14,37,29,"data"],[73,18,37,33],[73,20,37,35],[73,24,37,39],[74,14,37,41,"error"],[75,12,37,47],[75,13,37,48],[76,10,38,16],[77,10,39,16],[77,16,39,22,"error"],[77,21,39,27],[78,8,40,12],[79,6,41,8],[79,7,41,9],[79,8,41,10],[80,4,42,4],[81,2,43,0],[82,0,43,1],[82,3]],"functionMap":{"names":["<global>","<anonymous>","adopt","P$argument_0","fulfilled","rejected","step","BlobDownloadBuilder","constructor","asStream","then","execute","__awaiter$argument_3"],"mappings":"AAA,4CC;ICC,kEC,sCD,ID;QGE,2FH;QIC,8FJ;QKC,8GL;CDG;eOG;ICC;KDG;IEC;KFE;IGC;KHE;IIC;+CCC;SDiB;KJC;CPC"},"hasCjsExports":false},"type":"js/module"}]}