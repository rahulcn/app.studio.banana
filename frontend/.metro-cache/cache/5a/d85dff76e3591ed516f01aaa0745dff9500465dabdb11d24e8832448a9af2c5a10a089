{"dependencies":[{"name":"../lib/errors","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":12,"column":17,"index":775},"end":{"line":12,"column":41,"index":799}}],"key":"+GSAvg/CWfG2ifOQrWLkai/D9hY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n    function adopt(value) {\n      return value instanceof P ? value : new P(function (resolve) {\n        resolve(value);\n      });\n    }\n    return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) {\n        try {\n          step(generator.next(value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function rejected(value) {\n        try {\n          step(generator[\"throw\"](value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function step(result) {\n        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n      }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n  };\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  const errors_1 = require(_dependencyMap[0], \"../lib/errors\");\n  class StreamDownloadBuilder {\n    constructor(downloadFn, shouldThrowOnError) {\n      this.downloadFn = downloadFn;\n      this.shouldThrowOnError = shouldThrowOnError;\n    }\n    then(onfulfilled, onrejected) {\n      return this.execute().then(onfulfilled, onrejected);\n    }\n    execute() {\n      return __awaiter(this, void 0, void 0, function* () {\n        try {\n          const result = yield this.downloadFn();\n          return {\n            data: result.body,\n            error: null\n          };\n        } catch (error) {\n          if (this.shouldThrowOnError) {\n            throw error;\n          }\n          if ((0, errors_1.isStorageError)(error)) {\n            return {\n              data: null,\n              error\n            };\n          }\n          throw error;\n        }\n      });\n    }\n  }\n  exports.default = StreamDownloadBuilder;\n});","lineCount":67,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0],[4,6,2,4,"__awaiter"],[4,15,2,13],[4,18,2,17],[4,22,2,21],[4,26,2,25],[4,30,2,29],[4,31,2,30,"__awaiter"],[4,40,2,39],[4,44,2,44],[4,54,2,54,"thisArg"],[4,61,2,61],[4,63,2,63,"_arguments"],[4,73,2,73],[4,75,2,75,"P"],[4,76,2,76],[4,78,2,78,"generator"],[4,87,2,87],[4,89,2,89],[5,4,3,4],[5,13,3,13,"adopt"],[5,18,3,18,"adopt"],[5,19,3,19,"value"],[5,24,3,24],[5,26,3,26],[6,6,3,28],[6,13,3,35,"value"],[6,18,3,40],[6,30,3,52,"P"],[6,31,3,53],[6,34,3,56,"value"],[6,39,3,61],[6,42,3,64],[6,46,3,68,"P"],[6,47,3,69],[6,48,3,70],[6,58,3,80,"resolve"],[6,65,3,87],[6,67,3,89],[7,8,3,91,"resolve"],[7,15,3,98],[7,16,3,99,"value"],[7,21,3,104],[7,22,3,105],[8,6,3,107],[8,7,3,108],[8,8,3,109],[9,4,3,111],[10,4,4,4],[10,11,4,11],[10,16,4,16,"P"],[10,17,4,17],[10,22,4,22,"P"],[10,23,4,23],[10,26,4,26,"Promise"],[10,33,4,33],[10,34,4,34],[10,36,4,36],[10,46,4,46,"resolve"],[10,53,4,53],[10,55,4,55,"reject"],[10,61,4,61],[10,63,4,63],[11,6,5,8],[11,15,5,17,"fulfilled"],[11,24,5,26,"fulfilled"],[11,25,5,27,"value"],[11,30,5,32],[11,32,5,34],[12,8,5,36],[12,12,5,40],[13,10,5,42,"step"],[13,14,5,46],[13,15,5,47,"generator"],[13,24,5,56],[13,25,5,57,"next"],[13,29,5,61],[13,30,5,62,"value"],[13,35,5,67],[13,36,5,68],[13,37,5,69],[14,8,5,71],[14,9,5,72],[14,10,5,73],[14,17,5,80,"e"],[14,18,5,81],[14,20,5,83],[15,10,5,85,"reject"],[15,16,5,91],[15,17,5,92,"e"],[15,18,5,93],[15,19,5,94],[16,8,5,96],[17,6,5,98],[18,6,6,8],[18,15,6,17,"rejected"],[18,23,6,25,"rejected"],[18,24,6,26,"value"],[18,29,6,31],[18,31,6,33],[19,8,6,35],[19,12,6,39],[20,10,6,41,"step"],[20,14,6,45],[20,15,6,46,"generator"],[20,24,6,55],[20,25,6,56],[20,32,6,63],[20,33,6,64],[20,34,6,65,"value"],[20,39,6,70],[20,40,6,71],[20,41,6,72],[21,8,6,74],[21,9,6,75],[21,10,6,76],[21,17,6,83,"e"],[21,18,6,84],[21,20,6,86],[22,10,6,88,"reject"],[22,16,6,94],[22,17,6,95,"e"],[22,18,6,96],[22,19,6,97],[23,8,6,99],[24,6,6,101],[25,6,7,8],[25,15,7,17,"step"],[25,19,7,21,"step"],[25,20,7,22,"result"],[25,26,7,28],[25,28,7,30],[26,8,7,32,"result"],[26,14,7,38],[26,15,7,39,"done"],[26,19,7,43],[26,22,7,46,"resolve"],[26,29,7,53],[26,30,7,54,"result"],[26,36,7,60],[26,37,7,61,"value"],[26,42,7,66],[26,43,7,67],[26,46,7,70,"adopt"],[26,51,7,75],[26,52,7,76,"result"],[26,58,7,82],[26,59,7,83,"value"],[26,64,7,88],[26,65,7,89],[26,66,7,90,"then"],[26,70,7,94],[26,71,7,95,"fulfilled"],[26,80,7,104],[26,82,7,106,"rejected"],[26,90,7,114],[26,91,7,115],[27,6,7,117],[28,6,8,8,"step"],[28,10,8,12],[28,11,8,13],[28,12,8,14,"generator"],[28,21,8,23],[28,24,8,26,"generator"],[28,33,8,35],[28,34,8,36,"apply"],[28,39,8,41],[28,40,8,42,"thisArg"],[28,47,8,49],[28,49,8,51,"_arguments"],[28,59,8,61],[28,63,8,65],[28,65,8,67],[28,66,8,68],[28,68,8,70,"next"],[28,72,8,74],[28,73,8,75],[28,74,8,76],[28,75,8,77],[29,4,9,4],[29,5,9,5],[29,6,9,6],[30,2,10,0],[30,3,10,1],[31,2,11,0,"Object"],[31,8,11,6],[31,9,11,7,"defineProperty"],[31,23,11,21],[31,24,11,22,"exports"],[31,31,11,29],[31,33,11,31],[31,45,11,43],[31,47,11,45],[32,4,11,47,"value"],[32,9,11,52],[32,11,11,54],[33,2,11,59],[33,3,11,60],[33,4,11,61],[34,2,12,0],[34,8,12,6,"errors_1"],[34,16,12,14],[34,19,12,17,"require"],[34,26,12,24],[34,27,12,24,"_dependencyMap"],[34,41,12,24],[34,61,12,40],[34,62,12,41],[35,2,13,0],[35,8,13,6,"StreamDownloadBuilder"],[35,29,13,27],[35,30,13,28],[36,4,14,4,"constructor"],[36,15,14,15,"constructor"],[36,16,14,16,"downloadFn"],[36,26,14,26],[36,28,14,28,"shouldThrowOnError"],[36,46,14,46],[36,48,14,48],[37,6,15,8],[37,10,15,12],[37,11,15,13,"downloadFn"],[37,21,15,23],[37,24,15,26,"downloadFn"],[37,34,15,36],[38,6,16,8],[38,10,16,12],[38,11,16,13,"shouldThrowOnError"],[38,29,16,31],[38,32,16,34,"shouldThrowOnError"],[38,50,16,52],[39,4,17,4],[40,4,18,4,"then"],[40,8,18,8,"then"],[40,9,18,9,"onfulfilled"],[40,20,18,20],[40,22,18,22,"onrejected"],[40,32,18,32],[40,34,18,34],[41,6,19,8],[41,13,19,15],[41,17,19,19],[41,18,19,20,"execute"],[41,25,19,27],[41,26,19,28],[41,27,19,29],[41,28,19,30,"then"],[41,32,19,34],[41,33,19,35,"onfulfilled"],[41,44,19,46],[41,46,19,48,"onrejected"],[41,56,19,58],[41,57,19,59],[42,4,20,4],[43,4,21,4,"execute"],[43,11,21,11,"execute"],[43,12,21,11],[43,14,21,14],[44,6,22,8],[44,13,22,15,"__awaiter"],[44,22,22,24],[44,23,22,25],[44,27,22,29],[44,29,22,31],[44,34,22,36],[44,35,22,37],[44,37,22,39],[44,42,22,44],[44,43,22,45],[44,45,22,47],[44,58,22,60],[45,8,23,12],[45,12,23,16],[46,10,24,16],[46,16,24,22,"result"],[46,22,24,28],[46,25,24,31],[46,31,24,37],[46,35,24,41],[46,36,24,42,"downloadFn"],[46,46,24,52],[46,47,24,53],[46,48,24,54],[47,10,25,16],[47,17,25,23],[48,12,26,20,"data"],[48,16,26,24],[48,18,26,26,"result"],[48,24,26,32],[48,25,26,33,"body"],[48,29,26,37],[49,12,27,20,"error"],[49,17,27,25],[49,19,27,27],[50,10,28,16],[50,11,28,17],[51,8,29,12],[51,9,29,13],[51,10,30,12],[51,17,30,19,"error"],[51,22,30,24],[51,24,30,26],[52,10,31,16],[52,14,31,20],[52,18,31,24],[52,19,31,25,"shouldThrowOnError"],[52,37,31,43],[52,39,31,45],[53,12,32,20],[53,18,32,26,"error"],[53,23,32,31],[54,10,33,16],[55,10,34,16],[55,14,34,20],[55,15,34,21],[55,16,34,22],[55,18,34,24,"errors_1"],[55,26,34,32],[55,27,34,33,"isStorageError"],[55,41,34,47],[55,43,34,49,"error"],[55,48,34,54],[55,49,34,55],[55,51,34,57],[56,12,35,20],[56,19,35,27],[57,14,35,29,"data"],[57,18,35,33],[57,20,35,35],[57,24,35,39],[58,14,35,41,"error"],[59,12,35,47],[59,13,35,48],[60,10,36,16],[61,10,37,16],[61,16,37,22,"error"],[61,21,37,27],[62,8,38,12],[63,6,39,8],[63,7,39,9],[63,8,39,10],[64,4,40,4],[65,2,41,0],[66,2,42,0,"exports"],[66,9,42,7],[66,10,42,8,"default"],[66,17,42,15],[66,20,42,18,"StreamDownloadBuilder"],[66,41,42,39],[67,0,42,40],[67,3]],"functionMap":{"names":["<global>","<anonymous>","adopt","P$argument_0","fulfilled","rejected","step","StreamDownloadBuilder","constructor","then","execute","__awaiter$argument_3"],"mappings":"AAA;4CCC;ICC,kEC,sCD,ID;QGE,2FH;QIC,8FJ;QKC,8GL;CDG;AOG;ICC;KDG;IEC;KFE;IGC;+CCC;SDiB;KHC;CPC"},"hasCjsExports":true},"type":"js/module"}]}