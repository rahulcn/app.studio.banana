{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.WebSocketFactory = void 0;\n  class WebSocketFactory {\n    static detectEnvironment() {\n      var _a;\n      if (typeof WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: WebSocket\n        };\n      }\n      if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: globalThis.WebSocket\n        };\n      }\n      if (typeof global !== 'undefined' && typeof global.WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: global.WebSocket\n        };\n      }\n      if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocketPair !== 'undefined' && typeof globalThis.WebSocket === 'undefined') {\n        return {\n          type: 'cloudflare',\n          error: 'Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.',\n          workaround: 'Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime.'\n        };\n      }\n      if (typeof globalThis !== 'undefined' && globalThis.EdgeRuntime || typeof navigator !== 'undefined' && ((_a = navigator.userAgent) === null || _a === void 0 ? void 0 : _a.includes('Vercel-Edge'))) {\n        return {\n          type: 'unsupported',\n          error: 'Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.',\n          workaround: 'Use serverless functions or a different deployment target for WebSocket functionality.'\n        };\n      }\n      if (typeof process !== 'undefined') {\n        // Use dynamic property access to avoid Next.js Edge Runtime static analysis warnings\n        const processVersions = process['versions'];\n        if (processVersions && processVersions['node']) {\n          // Remove 'v' prefix if present and parse the major version\n          const versionString = processVersions['node'];\n          const nodeVersion = parseInt(versionString.replace(/^v/, '').split('.')[0]);\n          // Node.js 22+ should have native WebSocket\n          if (nodeVersion >= 22) {\n            // Check if native WebSocket is available (should be in Node.js 22+)\n            if (typeof globalThis.WebSocket !== 'undefined') {\n              return {\n                type: 'native',\n                constructor: globalThis.WebSocket\n              };\n            }\n            // If not available, user needs to provide it\n            return {\n              type: 'unsupported',\n              error: `Node.js ${nodeVersion} detected but native WebSocket not found.`,\n              workaround: 'Provide a WebSocket implementation via the transport option.'\n            };\n          }\n          // Node.js < 22 doesn't have native WebSocket\n          return {\n            type: 'unsupported',\n            error: `Node.js ${nodeVersion} detected without native WebSocket support.`,\n            workaround: 'For Node.js < 22, install \"ws\" package and provide it via the transport option:\\n' + 'import ws from \"ws\"\\n' + 'new RealtimeClient(url, { transport: ws })'\n          };\n        }\n      }\n      return {\n        type: 'unsupported',\n        error: 'Unknown JavaScript runtime without WebSocket support.',\n        workaround: \"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation.\"\n      };\n    }\n    static getWebSocketConstructor() {\n      const env = this.detectEnvironment();\n      if (env.constructor) {\n        return env.constructor;\n      }\n      let errorMessage = env.error || 'WebSocket not supported in this environment.';\n      if (env.workaround) {\n        errorMessage += `\\n\\nSuggested solution: ${env.workaround}`;\n      }\n      throw new Error(errorMessage);\n    }\n    static createWebSocket(url, protocols) {\n      const WS = this.getWebSocketConstructor();\n      return new WS(url, protocols);\n    }\n    static isWebSocketSupported() {\n      try {\n        const env = this.detectEnvironment();\n        return env.type === 'native' || env.type === 'ws';\n      } catch (_a) {\n        return false;\n      }\n    }\n  }\n  exports.WebSocketFactory = WebSocketFactory;\n  exports.default = WebSocketFactory;\n});","lineCount":106,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"WebSocketFactory"],[7,26,3,24],[7,29,3,27],[7,34,3,32],[7,35,3,33],[8,2,4,0],[8,8,4,6,"WebSocketFactory"],[8,24,4,22],[8,25,4,23],[9,4,5,4],[9,11,5,11,"detectEnvironment"],[9,28,5,28,"detectEnvironment"],[9,29,5,28],[9,31,5,31],[10,6,6,8],[10,10,6,12,"_a"],[10,12,6,14],[11,6,7,8],[11,10,7,12],[11,17,7,19,"WebSocket"],[11,26,7,28],[11,31,7,33],[11,42,7,44],[11,44,7,46],[12,8,8,12],[12,15,8,19],[13,10,8,21,"type"],[13,14,8,25],[13,16,8,27],[13,24,8,35],[14,10,8,37,"constructor"],[14,21,8,48],[14,23,8,50,"WebSocket"],[15,8,8,60],[15,9,8,61],[16,6,9,8],[17,6,10,8],[17,10,10,12],[17,17,10,19,"globalThis"],[17,27,10,29],[17,32,10,34],[17,43,10,45],[17,47,11,12],[17,54,11,19,"globalThis"],[17,64,11,29],[17,65,11,30,"WebSocket"],[17,74,11,39],[17,79,11,44],[17,90,11,55],[17,92,11,57],[18,8,12,12],[18,15,12,19],[19,10,12,21,"type"],[19,14,12,25],[19,16,12,27],[19,24,12,35],[20,10,12,37,"constructor"],[20,21,12,48],[20,23,12,50,"globalThis"],[20,33,12,60],[20,34,12,61,"WebSocket"],[21,8,12,71],[21,9,12,72],[22,6,13,8],[23,6,14,8],[23,10,14,12],[23,17,14,19,"global"],[23,23,14,25],[23,28,14,30],[23,39,14,41],[23,43,15,12],[23,50,15,19,"global"],[23,56,15,25],[23,57,15,26,"WebSocket"],[23,66,15,35],[23,71,15,40],[23,82,15,51],[23,84,15,53],[24,8,16,12],[24,15,16,19],[25,10,16,21,"type"],[25,14,16,25],[25,16,16,27],[25,24,16,35],[26,10,16,37,"constructor"],[26,21,16,48],[26,23,16,50,"global"],[26,29,16,56],[26,30,16,57,"WebSocket"],[27,8,16,67],[27,9,16,68],[28,6,17,8],[29,6,18,8],[29,10,18,12],[29,17,18,19,"globalThis"],[29,27,18,29],[29,32,18,34],[29,43,18,45],[29,47,19,12],[29,54,19,19,"globalThis"],[29,64,19,29],[29,65,19,30,"WebSocketPair"],[29,78,19,43],[29,83,19,48],[29,94,19,59],[29,98,20,12],[29,105,20,19,"globalThis"],[29,115,20,29],[29,116,20,30,"WebSocket"],[29,125,20,39],[29,130,20,44],[29,141,20,55],[29,143,20,57],[30,8,21,12],[30,15,21,19],[31,10,22,16,"type"],[31,14,22,20],[31,16,22,22],[31,28,22,34],[32,10,23,16,"error"],[32,15,23,21],[32,17,23,23],[32,106,23,112],[33,10,24,16,"workaround"],[33,20,24,26],[33,22,24,28],[34,8,25,12],[34,9,25,13],[35,6,26,8],[36,6,27,8],[36,10,27,13],[36,17,27,20,"globalThis"],[36,27,27,30],[36,32,27,35],[36,43,27,46],[36,47,27,50,"globalThis"],[36,57,27,60],[36,58,27,61,"EdgeRuntime"],[36,69,27,72],[36,73,28,13],[36,80,28,20,"navigator"],[36,89,28,29],[36,94,28,34],[36,105,28,45],[36,110,29,17],[36,111,29,18,"_a"],[36,113,29,20],[36,116,29,23,"navigator"],[36,125,29,32],[36,126,29,33,"userAgent"],[36,135,29,42],[36,141,29,48],[36,145,29,52],[36,149,29,56,"_a"],[36,151,29,58],[36,156,29,63],[36,161,29,68],[36,162,29,69],[36,165,29,72],[36,170,29,77],[36,171,29,78],[36,174,29,81,"_a"],[36,176,29,83],[36,177,29,84,"includes"],[36,185,29,92],[36,186,29,93],[36,199,29,106],[36,200,29,107],[36,201,29,109],[36,203,29,111],[37,8,30,12],[37,15,30,19],[38,10,31,16,"type"],[38,14,31,20],[38,16,31,22],[38,29,31,35],[39,10,32,16,"error"],[39,15,32,21],[39,17,32,23],[39,116,32,122],[40,10,33,16,"workaround"],[40,20,33,26],[40,22,33,28],[41,8,34,12],[41,9,34,13],[42,6,35,8],[43,6,36,8],[43,10,36,12],[43,17,36,19,"process"],[43,24,36,26],[43,29,36,31],[43,40,36,42],[43,42,36,44],[44,8,37,12],[45,8,38,12],[45,14,38,18,"processVersions"],[45,29,38,33],[45,32,38,36,"process"],[45,39,38,43],[45,40,38,44],[45,50,38,54],[45,51,38,55],[46,8,39,12],[46,12,39,16,"processVersions"],[46,27,39,31],[46,31,39,35,"processVersions"],[46,46,39,50],[46,47,39,51],[46,53,39,57],[46,54,39,58],[46,56,39,60],[47,10,40,16],[48,10,41,16],[48,16,41,22,"versionString"],[48,29,41,35],[48,32,41,38,"processVersions"],[48,47,41,53],[48,48,41,54],[48,54,41,60],[48,55,41,61],[49,10,42,16],[49,16,42,22,"nodeVersion"],[49,27,42,33],[49,30,42,36,"parseInt"],[49,38,42,44],[49,39,42,45,"versionString"],[49,52,42,58],[49,53,42,59,"replace"],[49,60,42,66],[49,61,42,67],[49,65,42,71],[49,67,42,73],[49,69,42,75],[49,70,42,76],[49,71,42,77,"split"],[49,76,42,82],[49,77,42,83],[49,80,42,86],[49,81,42,87],[49,82,42,88],[49,83,42,89],[49,84,42,90],[49,85,42,91],[50,10,43,16],[51,10,44,16],[51,14,44,20,"nodeVersion"],[51,25,44,31],[51,29,44,35],[51,31,44,37],[51,33,44,39],[52,12,45,20],[53,12,46,20],[53,16,46,24],[53,23,46,31,"globalThis"],[53,33,46,41],[53,34,46,42,"WebSocket"],[53,43,46,51],[53,48,46,56],[53,59,46,67],[53,61,46,69],[54,14,47,24],[54,21,47,31],[55,16,47,33,"type"],[55,20,47,37],[55,22,47,39],[55,30,47,47],[56,16,47,49,"constructor"],[56,27,47,60],[56,29,47,62,"globalThis"],[56,39,47,72],[56,40,47,73,"WebSocket"],[57,14,47,83],[57,15,47,84],[58,12,48,20],[59,12,49,20],[60,12,50,20],[60,19,50,27],[61,14,51,24,"type"],[61,18,51,28],[61,20,51,30],[61,33,51,43],[62,14,52,24,"error"],[62,19,52,29],[62,21,52,31],[62,32,52,42,"nodeVersion"],[62,43,52,53],[62,86,52,96],[63,14,53,24,"workaround"],[63,24,53,34],[63,26,53,36],[64,12,54,20],[64,13,54,21],[65,10,55,16],[66,10,56,16],[67,10,57,16],[67,17,57,23],[68,12,58,20,"type"],[68,16,58,24],[68,18,58,26],[68,31,58,39],[69,12,59,20,"error"],[69,17,59,25],[69,19,59,27],[69,30,59,38,"nodeVersion"],[69,41,59,49],[69,86,59,94],[70,12,60,20,"workaround"],[70,22,60,30],[70,24,60,32],[70,107,60,115],[70,110,61,24],[70,133,61,47],[70,136,62,24],[71,10,63,16],[71,11,63,17],[72,8,64,12],[73,6,65,8],[74,6,66,8],[74,13,66,15],[75,8,67,12,"type"],[75,12,67,16],[75,14,67,18],[75,27,67,31],[76,8,68,12,"error"],[76,13,68,17],[76,15,68,19],[76,70,68,74],[77,8,69,12,"workaround"],[77,18,69,22],[77,20,69,24],[78,6,70,8],[78,7,70,9],[79,4,71,4],[80,4,72,4],[80,11,72,11,"getWebSocketConstructor"],[80,34,72,34,"getWebSocketConstructor"],[80,35,72,34],[80,37,72,37],[81,6,73,8],[81,12,73,14,"env"],[81,15,73,17],[81,18,73,20],[81,22,73,24],[81,23,73,25,"detectEnvironment"],[81,40,73,42],[81,41,73,43],[81,42,73,44],[82,6,74,8],[82,10,74,12,"env"],[82,13,74,15],[82,14,74,16,"constructor"],[82,25,74,27],[82,27,74,29],[83,8,75,12],[83,15,75,19,"env"],[83,18,75,22],[83,19,75,23,"constructor"],[83,30,75,34],[84,6,76,8],[85,6,77,8],[85,10,77,12,"errorMessage"],[85,22,77,24],[85,25,77,27,"env"],[85,28,77,30],[85,29,77,31,"error"],[85,34,77,36],[85,38,77,40],[85,84,77,86],[86,6,78,8],[86,10,78,12,"env"],[86,13,78,15],[86,14,78,16,"workaround"],[86,24,78,26],[86,26,78,28],[87,8,79,12,"errorMessage"],[87,20,79,24],[87,24,79,28],[87,51,79,55,"env"],[87,54,79,58],[87,55,79,59,"workaround"],[87,65,79,69],[87,67,79,71],[88,6,80,8],[89,6,81,8],[89,12,81,14],[89,16,81,18,"Error"],[89,21,81,23],[89,22,81,24,"errorMessage"],[89,34,81,36],[89,35,81,37],[90,4,82,4],[91,4,83,4],[91,11,83,11,"createWebSocket"],[91,26,83,26,"createWebSocket"],[91,27,83,27,"url"],[91,30,83,30],[91,32,83,32,"protocols"],[91,41,83,41],[91,43,83,43],[92,6,84,8],[92,12,84,14,"WS"],[92,14,84,16],[92,17,84,19],[92,21,84,23],[92,22,84,24,"getWebSocketConstructor"],[92,45,84,47],[92,46,84,48],[92,47,84,49],[93,6,85,8],[93,13,85,15],[93,17,85,19,"WS"],[93,19,85,21],[93,20,85,22,"url"],[93,23,85,25],[93,25,85,27,"protocols"],[93,34,85,36],[93,35,85,37],[94,4,86,4],[95,4,87,4],[95,11,87,11,"isWebSocketSupported"],[95,31,87,31,"isWebSocketSupported"],[95,32,87,31],[95,34,87,34],[96,6,88,8],[96,10,88,12],[97,8,89,12],[97,14,89,18,"env"],[97,17,89,21],[97,20,89,24],[97,24,89,28],[97,25,89,29,"detectEnvironment"],[97,42,89,46],[97,43,89,47],[97,44,89,48],[98,8,90,12],[98,15,90,19,"env"],[98,18,90,22],[98,19,90,23,"type"],[98,23,90,27],[98,28,90,32],[98,36,90,40],[98,40,90,44,"env"],[98,43,90,47],[98,44,90,48,"type"],[98,48,90,52],[98,53,90,57],[98,57,90,61],[99,6,91,8],[99,7,91,9],[99,8,92,8],[99,15,92,15,"_a"],[99,17,92,17],[99,19,92,19],[100,8,93,12],[100,15,93,19],[100,20,93,24],[101,6,94,8],[102,4,95,4],[103,2,96,0],[104,2,97,0,"exports"],[104,9,97,7],[104,10,97,8,"WebSocketFactory"],[104,26,97,24],[104,29,97,27,"WebSocketFactory"],[104,45,97,43],[105,2,98,0,"exports"],[105,9,98,7],[105,10,98,8,"default"],[105,17,98,15],[105,20,98,18,"WebSocketFactory"],[105,36,98,34],[106,0,98,35],[106,3]],"functionMap":{"names":["<global>","WebSocketFactory","WebSocketFactory.detectEnvironment","WebSocketFactory.getWebSocketConstructor","WebSocketFactory.createWebSocket","WebSocketFactory.isWebSocketSupported"],"mappings":"AAA;ACG;ICC;KDkE;IEC;KFU;IGC;KHG;IIC;KJQ;CDC"},"hasCjsExports":true},"type":"js/module"}]}